<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>arm_quarto</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="ARM_Quarto_files/libs/clipboard/clipboard.min.js"></script>
<script src="ARM_Quarto_files/libs/quarto-html/quarto.js"></script>
<script src="ARM_Quarto_files/libs/quarto-html/popper.min.js"></script>
<script src="ARM_Quarto_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ARM_Quarto_files/libs/quarto-html/anchor.min.js"></script>
<link href="ARM_Quarto_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ARM_Quarto_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ARM_Quarto_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ARM_Quarto_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ARM_Quarto_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="association-rule-mining-arm" class="level1">
<h1>Association Rule Mining (ARM)</h1>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Association rule mining is used to discover interesting connections hidden in large data sets, and the discovered patterns are usually represented in the form of association rules or frequent itemsets.</p>
<p>Association rules reflect the interdependence and association between one thing and other things.</p>
<p>If there is a certain association between two or more things, then the occurrence of one of them can predict the occurrence of other things associated with it.</p>
<p>Association rule mining is used for knowledge discovery, not prediction, so it is an unsupervised machine learning algorithm.</p>
</section>
<section id="theory" class="level2">
<h2 class="anchored" data-anchor-id="theory">Theory</h2>
<p>Here we first talk about some definitions related to ARM.</p>
<ol type="1">
<li><p>Itemset</p>
<p>A set that contains zero or more items, or a k-item set if it contains k items.</p>
<p>For example, if a customer buys a bag of items, then the bag of items is an item set, and each item in it is an item.</p></li>
<li><p>Transaction <span class="math inline">\(T\)</span> and Transaction Set <span class="math inline">\(D\)</span></p>
<p>A transaction <span class="math inline">\(T\)</span> is an item set, and each transaction <span class="math inline">\(T\)</span> is associated with a unique identifier <span class="math inline">\(T_id\)</span>.</p>
<p>The different transactions together form the transaction set <span class="math inline">\(D\)</span>s, which constitutes the number of transaction databases discovered by the association rules.</p>
<p>In the above example, a bag of goods per customer (all goods put into one bag) is a transaction, so in terms of each bag unit, the sales volume for the day is a transaction set.</p></li>
<li><p>Support count</p>
<p>The number of transactions containing a specific set of items is denoted by the symbol <span class="math inline">\(\sigma\)</span>, e.g.&nbsp;<span class="math inline">\(\sigma({milk,beer,bread})=2\)</span>, which means that there are 2 purchases of these 3 items at the same time today.</p></li>
<li><p>Support</p>
<p>is the ratio of the number of transactions containing a particular set of items to the total number of transactions, and is denoted by the symbol <span class="math inline">\(s\)</span>, e.g.&nbsp;<span class="math inline">\(s({milk,beer,bread})=2/5\)</span>, indicating that 2/5 customers bought all 3 items at once today.</p></li>
<li><p>Frequent itemset</p>
<p>Refers to the set of all items that satisfy the minimum support threshold (min_support). This minimum support threshold is given.</p></li>
<li><p>Confidence</p>
<p>Confidence is the ratio of the number of transactions containing the specified <span class="math inline">\({Y,X}\)</span> to the number of transactions containing <span class="math inline">\({Y}\)</span> or <span class="math inline">\({X}\)</span>, denoted by the symbol <span class="math inline">\(s\)</span>.</p></li>
</ol>
<p><strong>Next we talk about the Apriori algorithm.</strong></p>
<p>A common algorithm for finding frequent item sets.</p>
<p>Apriori principles:</p>
<ol type="1">
<li><p>if an itemset is frequent, then all its subsets must also be frequent.</p></li>
<li><p>On the contrary, if an itemset is non-frequent, then all its supersets are also non-frequent.</p></li>
</ol>
<p>There exists an itemset {A,B}, and the one containing it is the superset, such as {A,B,C}. The usefulness of this principle is that if an itemset is found to be infrequent, its subsets or supersets can be cut out earlier to reduce the computational overhead.</p>
<p>Features of Apriori algorithm:</p>
<ol type="1">
<li><p>multiple scans of the database.</p></li>
<li><p>large size of candidate items.</p></li>
</ol>
<p>3, large overhead of computing support.</p>
<p>The disadvantage of Apriori algorithm is that it needs to generate candidate items repeatedly, and if the number of items is relatively large, the number of candidate items will reach a combined explosive growth.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>Import packages</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> apyori <span class="im">import</span> apriori</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> mlxtend.frequent_patterns <span class="im">import</span> apriori, association_rules</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> pd.read_csv(<span class="st">"clean_record_data.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> dt.drop(columns<span class="op">=</span>[<span class="st">"Unnamed: 0"</span>])</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>dt.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Credit_Mix</th>
      <th>Payment_of_Min_Amount</th>
      <th>Credit_Score</th>
      <th>Age</th>
      <th>Annual_Income</th>
      <th>Monthly_Inhand_Salary</th>
      <th>Num_Bank_Accounts</th>
      <th>Num_Credit_Card</th>
      <th>Interest_Rate</th>
      <th>Num_of_Loan</th>
      <th>...</th>
      <th>Occupation_Musician</th>
      <th>Occupation_Scientist</th>
      <th>Occupation_Teacher</th>
      <th>Occupation_Writer</th>
      <th>Payment_Behaviour_High_spent_Large_value_payments</th>
      <th>Payment_Behaviour_High_spent_Medium_value_payments</th>
      <th>Payment_Behaviour_High_spent_Small_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Large_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Medium_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Small_value_payments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>-0.529412</td>
      <td>-0.336516</td>
      <td>-0.383675</td>
      <td>-0.75</td>
      <td>-0.666667</td>
      <td>-0.928571</td>
      <td>0.0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>-0.529412</td>
      <td>-0.336516</td>
      <td>0.000000</td>
      <td>-0.75</td>
      <td>-0.666667</td>
      <td>-0.928571</td>
      <td>0.0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>-0.529412</td>
      <td>-0.336516</td>
      <td>-0.383675</td>
      <td>-0.75</td>
      <td>-0.666667</td>
      <td>-0.928571</td>
      <td>0.0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>-0.529412</td>
      <td>-0.336516</td>
      <td>0.000000</td>
      <td>-0.75</td>
      <td>-0.666667</td>
      <td>-0.928571</td>
      <td>0.0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2</td>
      <td>0</td>
      <td>2</td>
      <td>-0.529412</td>
      <td>-0.336516</td>
      <td>-0.383675</td>
      <td>-0.75</td>
      <td>-0.666667</td>
      <td>-0.928571</td>
      <td>0.0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 40 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dt.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>Index(['Credit_Mix', 'Payment_of_Min_Amount', 'Credit_Score', 'Age',
       'Annual_Income', 'Monthly_Inhand_Salary', 'Num_Bank_Accounts',
       'Num_Credit_Card', 'Interest_Rate', 'Num_of_Loan',
       'Delay_from_due_date', 'Num_of_Delayed_Payment', 'Changed_Credit_Limit',
       'Num_Credit_Inquiries', 'Outstanding_Debt', 'Credit_Utilization_Ratio',
       'Total_EMI_per_month', 'Amount_invested_monthly', 'Monthly_Balance',
       'Occupation_Accountant', 'Occupation_Architect', 'Occupation_Developer',
       'Occupation_Doctor', 'Occupation_Engineer', 'Occupation_Entrepreneur',
       'Occupation_Journalist', 'Occupation_Lawyer', 'Occupation_Manager',
       'Occupation_Mechanic', 'Occupation_Media_Manager',
       'Occupation_Musician', 'Occupation_Scientist', 'Occupation_Teacher',
       'Occupation_Writer',
       'Payment_Behaviour_High_spent_Large_value_payments',
       'Payment_Behaviour_High_spent_Medium_value_payments',
       'Payment_Behaviour_High_spent_Small_value_payments',
       'Payment_Behaviour_Low_spent_Large_value_payments',
       'Payment_Behaviour_Low_spent_Medium_value_payments',
       'Payment_Behaviour_Low_spent_Small_value_payments'],
      dtype='object')</code></pre>
</div>
</div>
<p><strong>Apriori Algorithm and One-Hot Encoding</strong></p>
<p>Apriori’s algorithm transforms True/False or 1/0. So from the original data set, I chose some one-hot encoding variables with 1/0. The selected variables contain information of occupation and payment behaviour.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select some one-hot encoding variables</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>sub <span class="op">=</span> dt.drop(columns<span class="op">=</span>[<span class="st">'Credit_Mix'</span>, <span class="st">'Payment_of_Min_Amount'</span>, <span class="st">'Credit_Score'</span>, <span class="st">'Age'</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Annual_Income'</span>, <span class="st">'Monthly_Inhand_Salary'</span>, <span class="st">'Num_Bank_Accounts'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Num_Credit_Card'</span>, <span class="st">'Interest_Rate'</span>, <span class="st">'Num_of_Loan'</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Delay_from_due_date'</span>, <span class="st">'Num_of_Delayed_Payment'</span>, <span class="st">'Changed_Credit_Limit'</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Num_Credit_Inquiries'</span>, <span class="st">'Outstanding_Debt'</span>, <span class="st">'Credit_Utilization_Ratio'</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>       <span class="st">'Total_EMI_per_month'</span>, <span class="st">'Amount_invested_monthly'</span>, <span class="st">'Monthly_Balance'</span>])</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>sub.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>Index(['Occupation_Accountant', 'Occupation_Architect', 'Occupation_Developer',
       'Occupation_Doctor', 'Occupation_Engineer', 'Occupation_Entrepreneur',
       'Occupation_Journalist', 'Occupation_Lawyer', 'Occupation_Manager',
       'Occupation_Mechanic', 'Occupation_Media_Manager',
       'Occupation_Musician', 'Occupation_Scientist', 'Occupation_Teacher',
       'Occupation_Writer',
       'Payment_Behaviour_High_spent_Large_value_payments',
       'Payment_Behaviour_High_spent_Medium_value_payments',
       'Payment_Behaviour_High_spent_Small_value_payments',
       'Payment_Behaviour_Low_spent_Large_value_payments',
       'Payment_Behaviour_Low_spent_Medium_value_payments',
       'Payment_Behaviour_Low_spent_Small_value_payments'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>sub.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Occupation_Accountant</th>
      <th>Occupation_Architect</th>
      <th>Occupation_Developer</th>
      <th>Occupation_Doctor</th>
      <th>Occupation_Engineer</th>
      <th>Occupation_Entrepreneur</th>
      <th>Occupation_Journalist</th>
      <th>Occupation_Lawyer</th>
      <th>Occupation_Manager</th>
      <th>Occupation_Mechanic</th>
      <th>...</th>
      <th>Occupation_Musician</th>
      <th>Occupation_Scientist</th>
      <th>Occupation_Teacher</th>
      <th>Occupation_Writer</th>
      <th>Payment_Behaviour_High_spent_Large_value_payments</th>
      <th>Payment_Behaviour_High_spent_Medium_value_payments</th>
      <th>Payment_Behaviour_High_spent_Small_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Large_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Medium_value_payments</th>
      <th>Payment_Behaviour_Low_spent_Small_value_payments</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 21 columns</p>
</div>
</div>
</div>
<p><strong>Applying Apriori and Resulting</strong></p>
<p>The next step is to create the Apriori Model. We can change all the parameters in the Apriori Model in the mlxtend package.</p>
<p>I will try to use minimum support parameters for this modeling.</p>
<p>For this, I set a min_support value with a threshold value of 0.5% and printed them on the screen as well.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> apriori(sub, min_support <span class="op">=</span> <span class="fl">0.005</span>, use_colnames <span class="op">=</span> <span class="va">True</span>, verbose <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/Users/wangshiyu/opt/anaconda3/lib/python3.9/site-packages/mlxtend/frequent_patterns/fpcommon.py:111: DeprecationWarning:

DataFrames with non-bool types result in worse computationalperformance and their support might be discontinued in the future.Please use a DataFrame with bool type
</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Processing 420 combinations | Sampling itemset size 2Processing 675 combinations | Sampling itemset size 3</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>support</th>
      <th>itemsets</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.062639</td>
      <td>(Occupation_Accountant)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.063753</td>
      <td>(Occupation_Architect)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.062424</td>
      <td>(Occupation_Developer)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.060870</td>
      <td>(Occupation_Doctor)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.063446</td>
      <td>(Occupation_Engineer)</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>106</th>
      <td>0.032730</td>
      <td>(Occupation_Writer, Payment_Behaviour_High_spe...</td>
    </tr>
    <tr>
      <th>107</th>
      <td>0.014325</td>
      <td>(Payment_Behaviour_High_spent_Small_value_paym...</td>
    </tr>
    <tr>
      <th>108</th>
      <td>0.013742</td>
      <td>(Occupation_Writer, Payment_Behaviour_Low_spen...</td>
    </tr>
    <tr>
      <th>109</th>
      <td>0.018170</td>
      <td>(Payment_Behaviour_Low_spent_Medium_value_paym...</td>
    </tr>
    <tr>
      <th>110</th>
      <td>0.032914</td>
      <td>(Occupation_Writer, Payment_Behaviour_Low_spen...</td>
    </tr>
  </tbody>
</table>
<p>111 rows × 2 columns</p>
</div>
</div>
</div>
<p>Let’s view our interpretation values using the Associan rule function.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Let's view our interpretation values using the Associan rule function.</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_ar <span class="op">=</span> association_rules(df, metric <span class="op">=</span> <span class="st">"confidence"</span>, min_threshold <span class="op">=</span> <span class="fl">0.001</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>df_ar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>antecedents</th>
      <th>consequents</th>
      <th>antecedent support</th>
      <th>consequent support</th>
      <th>support</th>
      <th>confidence</th>
      <th>lift</th>
      <th>leverage</th>
      <th>conviction</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>(Payment_Behaviour_High_spent_Large_value_paym...</td>
      <td>(Occupation_Accountant)</td>
      <td>0.137302</td>
      <td>0.062639</td>
      <td>0.008313</td>
      <td>0.060545</td>
      <td>0.966577</td>
      <td>-0.000287</td>
      <td>0.997772</td>
    </tr>
    <tr>
      <th>1</th>
      <td>(Occupation_Accountant)</td>
      <td>(Payment_Behaviour_High_spent_Large_value_paym...</td>
      <td>0.062639</td>
      <td>0.137302</td>
      <td>0.008313</td>
      <td>0.132713</td>
      <td>0.966577</td>
      <td>-0.000287</td>
      <td>0.994709</td>
    </tr>
    <tr>
      <th>2</th>
      <td>(Occupation_Accountant)</td>
      <td>(Payment_Behaviour_High_spent_Medium_value_pay...</td>
      <td>0.062639</td>
      <td>0.251189</td>
      <td>0.016156</td>
      <td>0.257917</td>
      <td>1.026786</td>
      <td>0.000421</td>
      <td>1.009067</td>
    </tr>
    <tr>
      <th>3</th>
      <td>(Payment_Behaviour_High_spent_Medium_value_pay...</td>
      <td>(Occupation_Accountant)</td>
      <td>0.251189</td>
      <td>0.062639</td>
      <td>0.016156</td>
      <td>0.064317</td>
      <td>1.026786</td>
      <td>0.000421</td>
      <td>1.001793</td>
    </tr>
    <tr>
      <th>4</th>
      <td>(Payment_Behaviour_High_spent_Small_value_paym...</td>
      <td>(Occupation_Accountant)</td>
      <td>0.113641</td>
      <td>0.062639</td>
      <td>0.007250</td>
      <td>0.063793</td>
      <td>1.018435</td>
      <td>0.000131</td>
      <td>1.001233</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>175</th>
      <td>(Payment_Behaviour_Low_spent_Large_value_payme...</td>
      <td>(Occupation_Writer)</td>
      <td>0.104459</td>
      <td>0.129388</td>
      <td>0.013742</td>
      <td>0.131558</td>
      <td>1.016775</td>
      <td>0.000227</td>
      <td>1.002499</td>
    </tr>
    <tr>
      <th>176</th>
      <td>(Payment_Behaviour_Low_spent_Medium_value_paym...</td>
      <td>(Occupation_Writer)</td>
      <td>0.138590</td>
      <td>0.129388</td>
      <td>0.018170</td>
      <td>0.131105</td>
      <td>1.013273</td>
      <td>0.000238</td>
      <td>1.001977</td>
    </tr>
    <tr>
      <th>177</th>
      <td>(Occupation_Writer)</td>
      <td>(Payment_Behaviour_Low_spent_Medium_value_paym...</td>
      <td>0.129388</td>
      <td>0.138590</td>
      <td>0.018170</td>
      <td>0.140430</td>
      <td>1.013273</td>
      <td>0.000238</td>
      <td>1.002140</td>
    </tr>
    <tr>
      <th>178</th>
      <td>(Occupation_Writer)</td>
      <td>(Payment_Behaviour_Low_spent_Small_value_payme...</td>
      <td>0.129388</td>
      <td>0.254819</td>
      <td>0.032914</td>
      <td>0.254386</td>
      <td>0.998302</td>
      <td>-0.000056</td>
      <td>0.999420</td>
    </tr>
    <tr>
      <th>179</th>
      <td>(Payment_Behaviour_Low_spent_Small_value_payme...</td>
      <td>(Occupation_Writer)</td>
      <td>0.254819</td>
      <td>0.129388</td>
      <td>0.032914</td>
      <td>0.129168</td>
      <td>0.998302</td>
      <td>-0.000056</td>
      <td>0.999748</td>
    </tr>
  </tbody>
</table>
<p>180 rows × 9 columns</p>
</div>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> nx.from_pandas_edgelist(df_ar, <span class="st">'antecedents'</span>, <span class="st">'consequents'</span>, <span class="va">True</span>, nx.DiGraph())</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>nx.draw(G)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="ARM_Quarto_files/figure-html/cell-9-output-1.png" width="691" height="499"></p>
</div>
</div>
</section>
<section id="result" class="level2">
<h2 class="anchored" data-anchor-id="result">Result</h2>
<p><strong>For example, if we examine our 1st index value;</strong></p>
<ul>
<li>The probability of the occupation of a person is accountant is 6%.</li>
<li>High spent large value paymets is seen as 14%.</li>
<li>We can say that the support of both accountant and high spent large value payments is measured as 0.8%.</li>
<li>6% of whose occupation is accountant is high spent large value payments.</li>
<li>The correlation with each other is seen as 0.99.</li>
</ul>
</section>
<section id="conclusions" class="level2">
<h2 class="anchored" data-anchor-id="conclusions">Conclusions</h2>
<p>From the data frame above containing the result, we find that among all combinations of payment behaviour and occupation, we can observe that the probability of certain combinations occurring is very high, that is, for people in a particular occupation, they may tend to have a certain payment habit, for example, 25% of people who are writers have a payment habit of low spent small value at the same time. by these relationships By comparing these relationships, we can make better decisions for credit evaluation in employment.</p>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>https://en.wikipedia.org/wiki/Association_rule_learning</p>
<p>https://blogs.oracle.com/datascience/overview-of-traditional-machine-learning-techniques</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>